chain:
  gap_extend: 0.5
  gap_open: 2.0
  offset_band: 10
  slope_penalty: 0.05
  # Phase-2 chaining parameters
  alpha: 0.1      # position deviation penalty
  beta: 1.0       # gap penalty
  gamma: 2.0      # strand flip penalty
continuous:
  hnsw_enable: false
  srp_bits: 256
  srp_seed: 13
data:
  allow_overwrite: false
  work_dir: ./elsa_index
discrete:
  K: 4096
  bands_rows:
  - 24
  - 8
  emit_skipgram: true
  idf_max_df_frac: 0.05
  idf_min_df: 5
  minhash_hashes: 192
dtw:
  band: 10
  enable: false
  # Phase-2 DTW refinement  
  refine_enable: false            # bounded DTW on final chain only
  refine_band: 2                  # DTW band width in genes
ingest:
  gene_caller: prodigal
  keep_partial: false
  min_cds_aa: 60
  prodigal_mode: single
plm:
  batch_amino_acids: 16000
  device: auto
  fp16: true
  l2_normalize: true
  model: esm2_t12
  project_to_D: 256
score:
  alpha: 1.0
  beta: 0.1
  delta: 0.1
  fdr_target: 0.01
  gamma: 0.2
shingles:
  n: 5
  pos_dim: 16
  strand_flag: signed
  stride: 1
  weights: triangular
system:
  jobs: auto
  mmap: true
  rng_seed: 17

# Phase-2 Feature Flags and Configuration
phase2:
  enable: false                    # Master switch for all Phase-2 features
  weighted_sketch: false          # Use weighted MinHash with IDF/MGE masking
  multiscale: false               # Enable macroâ†’micro windowing
  flip_dp: false                  # Use flip-aware affine-gap chaining
  calibration: false              # Enable null models and FDR control
  hnsw: false                     # Use HNSW dense retrieval

# Weighted sketching configuration
sketch:
  type: "minhash"                 # "minhash" or "weighted_minhash"
  bits: 64                        # 64, 2, or 1 for compression
  size: 96                        # sketch size
  idf:
    max: 10.0                     # clamp IDF values
  
# MGE masking configuration  
mge_mask:
  path: null                      # YAML list of PFAM accessions to mask

# Multi-scale windowing
window:
  micro:
    size: 5
    stride: 1
  macro:
    size: 12
    stride: 3
  adaptive:
    enable: false                 # future: CUSUM change-point detection

# HNSW configuration
hnsw:
  M: 16
  efConstruction: 200
  efSearch: 50

# Retrieval method selection
retrieval:
  dense: "srp"                    # "srp" or "hnsw"

# Calibration parameters
calib:
  null:
    iters: 100                    # null model iterations
  target_fdr: 0.05                # FDR threshold